  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Handle form submission without page reload
      const todoForm = document.getElementById('todo-form');
      if (todoForm) {
        todoForm.addEventListener('submit', function(e) {
          if (todoForm.getAttribute('data-js-submit') === 'true') {
            e.preventDefault();
            const formData = new FormData(todoForm);
            
            fetch('/todos', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                title: formData.get('title'),
                description: formData.get('description')
              })
            })
            .then(response => {
              if (response.ok) {
                window.location.reload();
              }
            })
            .catch(error => console.error('Error:', error));
          }
        });
      }
      
      // Handle mark as read button
      document.querySelectorAll('.mark-read-btn').forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          const todoId = this.getAttribute('data-id');
          
          fetch(`/todos/${todoId}/read`, {
            method: 'PATCH'
          })
          .then(response => {
            if (response.ok) {
              window.location.reload();
            }
          })
          .catch(error => console.error('Error:', error));
        });
      });
      
      // Handle complete/uncomplete button
      document.querySelectorAll('.toggle-complete-btn').forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          const todoId = this.getAttribute('data-id');
          const completed = this.getAttribute('data-completed') === 'false';
          
          fetch(`/todos/${todoId}`, {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              completed: completed
            })
          })
          .then(response => {
            if (response.ok) {
              window.location.reload();
            }
          })
          .catch(error => console.error('Error:', error));
        });
      });
      
      // Handle delete button
      document.querySelectorAll('.delete-btn').forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          if (confirm('Are you sure you want to delete this todo?')) {
            const todoId = this.getAttribute('data-id');
            
            fetch(`/todos/${todoId}`, {
              method: 'DELETE'
            })
            .then(response => {
              if (response.ok) {
                window.location.reload();
              }
            })
            .catch(error => console.error('Error:', error));
          }
        });
      });
    });
  </script>
</body>
</html>
